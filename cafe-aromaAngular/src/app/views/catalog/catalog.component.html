<div class="min-h-screen bg-background py-8 md:py-12" *ngIf="products$ | async as products">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    <div class="text-center mb-12">
      <h1 class="text-foreground mb-4 text-4xl md:text-5xl">Nuestro Catálogo</h1>
      <p class="text-muted-foreground max-w-2xl mx-auto leading-relaxed">
        Explora nuestra selección completa de cafés premium, tés aromáticos, productos de panadería y postres artesanales.
      </p>
    </div>

    <div class="mb-8">
      <div class="flex flex-wrap justify-center gap-2 md:gap-4">
        <button
          *ngFor="let category of categories"
          (click)="handleCategoryChange(category.id)"
          [ngClass]="{
            'bg-primary text-primary-foreground': selectedCategory === category.id,
            'bg-card text-card-foreground border border-border hover:cursor-pointer hover:bg-accent/50': selectedCategory !== category.id
          }"
          class="px-4 md:px-6 py-2 rounded-lg transition-colors text-sm md:text-base"
        >
          {{ category.name }}
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 mb-12">
      <app-product-card
        *ngFor="let product of currentProducts(products)"
        [name]="product.name"
        [description]="product.description"
        [price]="product.price"
        [imageUrl]="product.imageUrl"
      ></app-product-card>
    </div>

    <ng-container *ngIf="totalPages$ | async as totalPages">
      <div *ngIf="totalPages > 1" class="flex justify-center items-center space-x-2">
        <button
          (click)="previousPage()"
          [disabled]="currentPage === 1"
          class="px-4 py-2 rounded-lg bg-card text-card-foreground border border-border hover:bg-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        >
          Anterior
        </button>

        <div class="flex space-x-1">
          <button
            *ngFor="let page of [].constructor(totalPages); let i = index"
            (click)="goToPage(i + 1)"
            [ngClass]="{
              'bg-primary text-primary-foreground': currentPage === i + 1,
              'bg-card text-card-foreground border border-border hover:bg-accent/50': currentPage !== i + 1
            }"
            class="w-10 h-10 rounded-lg transition-colors"
          >
            {{ i + 1 }}
          </button>
        </div>

        <button
          (click)="nextPage(products)"
          [disabled]="currentPage === totalPages"
          class="px-4 py-2 rounded-lg bg-card text-card-foreground border border-border hover:bg-accent/50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
        >
          Siguiente
        </button>
      </div>

      <div class="text-center mt-8">
        <p class="text-muted-foreground">
          Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }}-
          {{ min(currentPage * itemsPerPage, filteredProducts(products).length) }} de
          {{ filteredProducts(products).length }} productos
          <span *ngIf="selectedCategory !== 'all'">
            en {{ selectedCategoryName }}
          </span>
        </p>
      </div>
    </ng-container>

  </div>
</div>
